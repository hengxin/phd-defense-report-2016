\section{研究问题}

%%%%%%%%%%%%%%%
% \begin{frame}{分布数据一致性问题}
%   \graphicspath{{tikz-in-beamer/}}
%   \begin{figure}[h!]
%     \centering
%     \begin{adjustbox}{max totalsize = {0.50\textwidth}{1.00\textheight}, center}
% 	  \input{tikz-in-beamer/distributed-data-overlay-for-problem}
%     \end{adjustbox}
%   \end{figure}
% 
%   \uncover<2->{
% 	\textcolor{red}{分布数据 \term{distributed data}} $\Leftarrow$ 共享 (集中式) 数据 \term{shared data}:}
%   \vspace{0.30cm}
%   \begin{description}
% 	\item<3->[上层应用:] 分布数据的语义是什么? 如何``方便''地使用分布数据?
% 	\item<4->[数据副本:] 以何种顺序应用更新? 对应用提供什么保证?
%   \end{description}
% \end{frame}
% %%%%%%%%%%%%%%%
% \begin{frame}{分布数据一致性问题}
%   \begin{figure}[h!]
%     \centering
%     \begin{adjustbox}{max totalsize = {0.70\textwidth}{1.00\textheight}, center}
% 	  \input{tikz-in-beamer/data-inconsistency-comment-reordering}
%     \end{adjustbox}
% 	\caption{社交网络中, 消息-评论乱序 \citeinbeamer{Lloyd}{CACM}{14}.}
%   \end{figure}
% \end{frame}
%%%%%%%%%%%%%%%
\begin{frame}{分布数据一致性问题}
  \graphicspath{{tikz-in-beamer/}}
  \begin{figure}[h!]
    \centering
    \begin{adjustbox}{max totalsize = {0.90\textwidth}{1.00\textheight}, center}
	  \input{tikz-in-beamer/distributed-data-consistency-dsds}
    \end{adjustbox}
  \end{figure}

  \begin{columns}
	\column{0.50\textwidth}
	  \uncover<2->{
		分布数据一致性问题 \textcolor{blue}{\small (应用视角)}:
	  \begin{itemize}
		\item 分布数据的语义是什么?
		\item 如何``方便''地使用分布数据?
	  \end{itemize}
	  }
	\column{0.50\textwidth}
	  \uncover<3->{
		分布共享数据服务 \textcolor{blue}{\small (中间件)}:
		\begin{itemize}
		  \item 屏蔽分布数据细节
		  \item 提供共享数据抽象
		\end{itemize}
	  }
  \end{columns}
\end{frame}
%%%%%%%%%%%%%%%
\begin{frame}{分布数据一致性问题}
  \begin{columns}[t]
	\column{0.40\textwidth}
	  理想情况:
	  \begin{itemize}
		\item one-size-fits-all\\一致性方案
		\item 始终观察到最新副本
	  \end{itemize}
	  \only<1-2>{
	  \begin{center}
		\textcolor{blue}{没有分布数据一致性问题}
	  \end{center}
	  }
	  \only<3->{
	  \begin{center}
		\textcolor{blue}{\soutthick{没有分布数据一致性问题}}
	  \end{center}
	  }
    \pause
	\column{0.48\textwidth}
	实际情况 (tradeoffs):
	  \fignocaption{width = 0.60\textwidth}{figures/consistency-centric-tradeoff.pdf}
  \end{columns}
  \pause
  \vspace{0.50cm}
  \begin{center}
	% \textcolor{red}{分布数据一致性问题是分布共享数据服务中的核心问题}
	\textcolor{blue}{在分布式系统中, \\以数据一致性为核心的权衡 \citeinbeamer{Guerraoui}{TCDE}{16} 使得 \\
  		分布数据一致性问题成为分布共享数据服务中的核心难题.}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%
% \begin{frame}{分布数据一致性问题举例 (I)}
%   \fig{width = 0.60\textwidth}{figures/data-inconsistency-comment-reordering.pdf}
%   {社交网络中, 消息-评论乱序 \citeinbeamer{Lloyd}{CACM}{14}.}
% \end{frame}
% %%%%%%%%%%%%%%%
% \begin{frame}{分布数据一致性问题举例 (II)}
%   \begin{figure}[h!]
%     \centering
%     \begin{adjustbox}{max totalsize = {0.65\textwidth}{0.65\textheight}, center}
%       \input{figures/data-inconsistency-update-lost}
%     \end{adjustbox}
%     \caption{多设备文件共享时, 更新丢失 ($\#N = 3, \#W = 2, \#R = 1$).}
%   \end{figure}
% \end{frame}
%%%%%%%%%%%%%%%
\begin{frame}{分布数据一致性问题}
  \mdf{red}{red}{论文研究动机}{blue}{考虑到上述权衡, \\面向分布式系统的\\分布数据一致性理论应体现什么特性?}

  \pause
  \vspace{0.80cm}

  \begin{center}
	分布式系统设计与其应用有哪些特点,\\对分布数据一致性理论有何影响?
  \end{center}

  % 考察分布数据一致性问题研究的历史:
  % \vspace{8pt}
  % \begin{itemize}
  %   \setlength{\itemsep}{6pt}
  %   \item 核心权衡与解决方案 
  %     \pause
  %   \item 理论与系统
  % \end{itemize}
\end{frame}
%%%%%%%%%%%%%%%
\begin{frame}{多处理器系统领域中的数据一致性理论}
  \textcolor{gray}{\small (分布)} 数据一致性问题是多处理器系统领域中的传统问题:
  \vspace{0.50cm}

  \begin{figure}
	\begin{subfigure}{0.50\textwidth}
	  \centering
	  \includegraphics[width = 0.85\textwidth]{figures/lamport-paper79.png}
	  \caption{Sequential Consistency \citeinbeamer{Lamport}{TC}{79}.}
	\end{subfigure}%
	\begin{subfigure}{0.45\textwidth}
	  \centering
	  \includegraphics[width = 0.80\textwidth]{figures/ieee-computer-tutorial.png}
	  \caption{Tutorial \citeinbeamer{Adve}{IEEE Computer}{96}.}
	\end{subfigure}
  \end{figure}
\end{frame}
%%%%%%%%%%%%%%%
\begin{frame}{多处理器系统领域中的数据一致性理论}
  \answer{特性: ``以程序为导向、强调正确性''}
  \vspace{0.20cm}

  ``相对于 SC {\small (Sequential Consistency)}''的正确性~\footnote{术语称为 SCNF: Sequential Consistency Normal Form.} \citeinbeamer{Adve}{ISCA}{90}:

  \begin{columns}
	\column{0.60\textwidth}
	  \begin{description}
		\item[一致性:] 一致性模型 + \textcolor{red}{编程模型}
		\item[程序:] 遵循预定规则
		\item[系统:] 提供 SC 保证
		\item<3>[权衡:] 易编程性 vs. 性能
	  \end{description}
	\column{0.35\textwidth}
	\uncover<2->{\fignocaption{width = 0.50\textwidth}{figures/jsr133-jmm.png}}
  \end{columns}

  % \fig{width = 0.35\textwidth}{figures/consistency-lattice.png}{一致性模型 {\scriptsize (依据 \citeinbeamer{Steinke}{JACM}{04} 中 Figure~13 重绘)}.}
\end{frame}
%%%%%%%%%%%%%%%
\begin{frame}{分布式系统领域中的数据一致性理论}
  分布数据一致性问题是分布式系统设计的核心问题之一:
  \vspace{0.50cm}

  \begin{figure}
	\begin{subfigure}{0.48\textwidth}
	  \centering
	  \includegraphics[width = 0.90\textwidth]{figures/bayou-paper.png}
	  \caption{Eventual Consistency \citeinbeamer{Terry}{SOSP}{95}.}
	\end{subfigure}%
	\begin{subfigure}{0.48\textwidth}
	  \centering
	  \includegraphics[width = 0.85\textwidth]{figures/dsss.pdf}
	  \caption{分布式存储系统 {\tiny (\textcolor{blue}{左: 开源}; \textcolor{red}{右: 商用})}.} % (\textcolor{blue}{\scriptsize 开源 [左]} \& \textcolor{red}{\scriptsize 商用 [右]})
	\end{subfigure}
  \end{figure}
\end{frame}
%%%%%%%%%%%%%%%
% \begin{frame}{数据一致性问题研究的历史阶段}
%   \fignocaption{width = 0.90\textwidth}{figures/consistency-model-history.pdf}
% 
% \end{frame}
%%%%%%%%%%%%%%%
\begin{frame}{分布式系统领域中的数据一致性理论}
  \answer{更复杂的权衡\only<1-2>{:} \uncover<3->{$\Longrightarrow$ 一致性理论不追求``相对于 SC''的正确性}}

  \fignocaption{width = 0.30\textwidth}{figures/consistency-centric-tradeoff.pdf}
  \vspace{-0.80cm}

  \uncover<2->{
  \begin{columns}
	\column{0.45\textwidth}
	  \fig{width = 0.50\textwidth}{figures/cap-theorem.png}{CAP 定理 \citeinbeamer{Brewer}{PODC}{00}}
	\column{0.50\textwidth}
	  \fig{width = 0.65\textwidth}{figures/pacelc-tradeoff-new.pdf}{PACELC 权衡 \citeinbeamer{Abadi}{IEEE Computer}{12}}
  \end{columns}
  }
\end{frame}
%%%%%%%%%%%%%%%
\begin{frame}{分布式系统领域中的数据一致性理论}
  \answer{更丰富的应用\only<1>{:} \uncover<2>{$\Longrightarrow$ 一致性理论应体现应用的多样性}}
  \vspace{0.50cm}

  \begin{columns}
	\column{0.45\textwidth}
	  \fig{width = 0.75\textwidth}{figures/cassandra-and-datastax.jpg}{Cassandra 分布式存储系统.}
	\column{0.45\textwidth}
	  \fig{width = 0.90\textwidth}{figures/cassandra-datastax-customers.png}{Cassandra \& DataStax 客户.}
  \end{columns}
\end{frame}
%%%%%%%%%%%%%%%
% \begin{frame}{分布式系统领域数据一致性理论}
%   \graphicspath{{tikz-in-beamer/}}
%   \begin{figure}[h!]
%     \centering
%     \begin{adjustbox}{max totalsize = {1.00\textwidth}{1.00\textheight}, center}
% 	  \input{tikz-in-beamer/consistency-model-distributed-system-history-beamer}
%     \end{adjustbox}
%   \end{figure}
% \end{frame}
%%%%%%%%%%%%%%%
% \begin{frame}{数据一致性问题研究的历史阶段 (结论)}
%   \begin{columns}[T]
% 	\column{0.40\textwidth}
% 	  新平台, 新特点:
% 	  \vspace{0.30cm}
% 	  \begin{itemize}
% 		\item 更丰富的应用
% 		\item 更复杂的权衡
% 	  \end{itemize}
% 	\column{0.45\textwidth}
% 	\only<2->{更具\textcolor{brown}{``柔性''}的数据一致性理论:}
% 	  \vspace{0.30cm}
% 	  \begin{itemize}
% 		\item<3-> 多样化, 可调节
% 		\item<4-> 精细化, 可度量
% 	  \end{itemize}
%   \end{columns}
% \end{frame}

  % \uncover<1->{\textcolor{blue}{需要什么样的数据一致性理论?}}
  % \vspace{0.30cm}

  % \begin{columns}[t]
  %   \column{0.50\textwidth}
  %     \uncover<2->{
  %     (1) 
  %     } 
  %   \column{0.50\textwidth}
  %     \uncover<3->{
  %   　(2) 体现更丰富的 tradeoffs
  %     \fignocaption{width = 0.60\textwidth}{figures/consistency-centric-tradeoff.pdf}
  %     }
  % \end{columns}
%%%%%%%%%%%%%%%
\begin{frame}{分布数据一致性问题研究理念 (I)}
  % \begin{center}
  %   \textcolor{red}{新平台, 新特点:} 更复杂的权衡、更丰富的应用
  % \end{center}
  \textcolor{red}{新平台, 新特点:} 

  \begin{itemize}
	\item<2-> 更复杂的权衡 $\Longrightarrow$ 正确性变得模糊
	\item<3-> 更丰富的应用 $\Longrightarrow$ 多样性变得重要
  \end{itemize}

  % \vspace{0.50cm}
  % \only<2>{
  % 棒球赛应用一致性需求~\citeinbeamer{Terry}{SOSP}{13}:
  % \begin{description}
  %   \item[记分员:] 采用 \textcolor{blue}{\texttt{\small read-my-writes consistency}} 更新比赛得分
  %   \item[电台记者:] 采用 \textcolor{blue}{\texttt{\small monotonic reads consistency}} 避免读到陈旧比分
  % \end{description}
  % }

  % \vspace{0.25cm}
  % \only<3>{
  % 出租车实时位置查询一致性需求:
  % \begin{description}
  %   \item[权衡:] 为了保证低延迟, 允许违反 \textcolor{blue}{\texttt{\small atomicity}}
  %   \item[有界:] 所有读请求都要满足 \textcolor{blue}{\texttt{\small 2-atomicity}}
  %   \item[量化需求:] 违反 \textcolor{blue}{\texttt{\small atomicity}} 的读请求低于$1\%$ 
  % \end{description}
  % }

  \vspace{1.00cm}
  \uncover<4->{
	\centerline{需要更具\textcolor{brown}{``柔性''}的分布数据一致性理论:}
  }
  \begin{description}
	\centering
	\item<5>[理念一:] 多样化, 可调节
	\item<5>[理念二:] 精细化, 可度量
  \end{description}
\end{frame}
%%%%%%%%%%%%%%%
\begin{frame}{数据一致性问题研究理念 (II)}
  \begin{description}
	\setlength{\itemsep}{10pt}
	\item[多样化:] 从单一到融合 (mono- vs. multi-) \citeinbeamer{Terry}{CACM}{13} 
	  \vspace{5pt}
	  \begin{itemize}
		\setlength{\itemsep}{5pt}
		\item 融合强弱一致性: 不同操作, 不同一致性需求 
		\item 融合一致与不一致: 容忍``有限度''的不一致
	  \end{itemize}
	  \begin{columns}
		\column{0.50\textwidth}
		  \fignocaption{width = 0.50\textwidth}{figures/tradeoff.jpg} 
		\column{0.50\textwidth}
		  \fignocaption{width = 0.35\textwidth}{figures/one-size-fit-all-text.jpg} 
	  \end{columns}
	\pause
	\item[可调节:] think \textcolor{red}{\it dynamically} \citeinbeamer{Terry}{SOSP}{13}
	  \vspace{10pt}
	  \begin{center}
	    依据应用需求/系统状态调节数据一致性
	  \end{center}
  \end{description}
\end{frame}
%%%%%%%%%%%%%%%
\begin{frame}{数据一致性问题研究理念 (III)}
  \begin{description}
	\setlength{\itemsep}{20pt}
	\item[精细化:] 从二元 {\small \;$\set{0,1}$} 到连续谱 {\small \;$(0,1)$}~\citeinbeamer{Yu}{TOCS}{02}
	  \begin{columns}
		\column{0.50\textwidth}
		  \fignocaption{scale = 0.15}{figures/black-or-white.jpg}
		\column{0.50\textwidth}
		  \fignocaption{scale = 0.05}{figures/prism-spectrum.jpg}
	  \end{columns}
	  \pause
	\item[可度量:] think \textcolor{red}{\it probabilistically} \citeinbeamer{Brewer}{PODC}{00}
	  \vspace{10pt}
	  \begin{center}
		度量系统/系统执行对一致性的满足程度
	  \end{center}
  \end{description}
\end{frame}
%%%%%%%%%%%%%%%
\begin{frame}{数据一致性问题研究理念 (IV)}
  \mdf{red}{red}{论文研究问题}{teal}{如何在分布式系统中\\落实\idea{}的\\分布数据一致性问题研究理念?}

  \pause

  \mdf{blue}{blue}{论文主要贡献}{black}{
	\begin{description}
	  \item<2->[理念:] 提出\idea{}的数据\\一致性问题研究理念
	  \item<+->[框架:] 提出包含``一个基础、三个维度''的技术框架 
	  \item<+->[VPC:] 验证 Pipelined-RAM Consistency \hfill \textcolor{brown}{\scriptsize [``精细化, 可度量'']}
	  \item<.->[PA2AM:]	量化 2-Atomicity 协议 \hfill \textcolor{brown}{\scriptsize [``精细化, 可度量'']} 
	  \item<.->[RVSI:] 可调节 Snapshot Isolation \hfill \textcolor{brown}{\scriptsize [``多样化, 可调节'']}
	\end{description}
  }
\end{frame}
%%%%%%%%%%%%%%%